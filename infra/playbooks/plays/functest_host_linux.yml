- name: Create linux (Ubuntu Xenial) functest hosts
  hosts: functest_host_linux
  become: true
  become_method: sudo

  vars_files:
  - ../secrets/infra_storage.yml

  roles:
  - role: samba_share
    become: true
    become_method: sudo
    when:
    - attach_infra_share | default(True) == True
    vars:
      samba_mount_pass: "{{ cinas_infra_password }}"
  - role: alphabet_common
  - role: jenkins_slave
  - role: functest_node
  - role: cloudalchemy.node-exporter