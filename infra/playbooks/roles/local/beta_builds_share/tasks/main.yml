# TODO: Rework role to be generic nfs mount
- name: Create specific users to mount remote share
  become: true
  become_method: sudo
  include_role:
    name: ANXS.generic-users
  vars:
    genericusers_groups:
    - name: beta-builds
      gid: 1050
      system: yes
    genericusers_users:
    - name: beta-builds
      uid: 1051
      ssh_keys: []
      groups: ["beta-builds"]
      system: yes

- name: Install nfs client
  apt:
    pkg: nfs-common
    state: present

- name: Create mount dir
  file:
    path: "/mnt/beta-builds"
    owner: "beta-builds"
    group: "beta-builds"
    recurse: true
    state: directory

- name: Mount nfs directory
  mount:
    path: "/mnt/beta-builds"
    src: "cinas:/share/NFSv=4/beta-builds"
    boot: yes
    state: mounted
    fstype: nfs

