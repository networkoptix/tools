- project:
    name: develop/vms

    project: vms
    pipeline: develop
    junkshop_project_name: ci
    max_concurrent_runners: 5
    build_distribution_concurrently: true
    test_distribution_concurrently: true

    version: vms
    default_branch: vms
    use_nx_vms_commit: vms  # FIXME: this is temp fix

    realcameratesting_framework_branch: vms
    build_watchers: ''

    jobs:

    - vms-current-with-tests

    - functest:
        build_watchers: anikitin@networkoptix.com,gsovetov@networkoptix.com,vfedorov@networkoptix.com
    - scalability-runner:
        build_watchers: anikitin@networkoptix.com,vfedorov@networkoptix.com
    - scalability:
        build_watchers: anikitin@networkoptix.com,vfedorov@networkoptix.com
    - realcamera:
        build_watchers: muskov@networkoptix.com,mpodstrechny@networkoptix.com

    - develop/hg-trigger:
        repo: nx_vms
        branch: vms
        version: vms
        job_to_trigger_on_vms_changed: 'develop.vms.preset.on-push-vms'
        job_to_trigger_on_ft_changed: 'develop.vms.preset.on-push-ft'
        job_to_trigger_on_rct_changed: ''

    - param-resolver

    - preset:

        preset-name:

        - on-push-vms:
            auth_kind: system
            vms_build_choice_default: 'VMS_NEW_BUILD_BY_COMMIT'
            vms_build_choice_option_default: 'vms'
            default_platforms: linux-x64,windows-x64,mac,bpi
            default_customizations: default

            ut_enabled: 'ON'

            ft_enabled: 'OFF'
            ft_commit_choice_default: FT_STABLE_PUSH_OR_NIGHTLY
            ft_commit_choice_option_default: ''

            rct_enabled: 'OFF'
            rct_commit_choice_default: RCT_STABLE_PUSH_OR_NIGHTLY
            rct_commit_choice_option_default: ''

            st_enabled: 'OFF'
            st_commit_choice_default: ST_BY_COMMIT
            st_commit_choice_option_default: ''

        - on-push-ft:
            auth_kind: system
            vms_build_choice_default: 'VMS_EXISTING_BUILD_FROM_STABLE_PUSH'
            vms_build_choice_option_default: 'vms'
            default_platforms: linux-x64,windows-x64,mac,bpi
            default_customizations: default

            ut_enabled: 'OFF'

            ft_enabled: 'ON'
            ft_commit_choice_default: FT_OTHER_COMMIT
            ft_commit_choice_option_default: ''
            test_list: self_tests

            rct_enabled: 'OFF'
            rct_commit_choice_default: RCT_STABLE_PUSH_OR_NIGHTLY
            rct_commit_choice_option_default: ''

            st_enabled: 'OFF'
            st_commit_choice_default: ST_BY_COMMIT
            st_commit_choice_option_default: ''

        - nightly-ft-linux:
            auth_kind: system
            timer: 'H 20 * * 2-6'
            build_description: "Nightly functional tests - linux"

            vms_build_choice_default: 'VMS_EXISTING_BUILD_FROM_STABLE_PUSH'
            vms_build_choice_option_default: 'vms'
            default_platforms: linux-x64,windows-x64
            default_customizations: default

            ut_enabled: 'OFF'

            ft_enabled: 'ON'
            ft_commit_choice_default: FT_STABLE_PUSH
            ft_commit_choice_option_default: ''
            test_select_expr: 'not windows and not smb'
            test_list: 'self_tests tests'

            rct_enabled: 'OFF'
            rct_commit_choice_default: RCT_STABLE_PUSH_OR_NIGHTLY
            rct_commit_choice_option_default: ''

            st_enabled: 'OFF'
            st_commit_choice_default: ST_BY_COMMIT
            st_commit_choice_option_default: ''

        - nightly-ft-windows:
            auth_kind: system
            timer: 'H 0 * * 2-6'
            build_description: "Nightly functional tests - windows"

            vms_build_choice_default: 'VMS_EXISTING_BUILD_FROM_STABLE_PUSH'
            vms_build_choice_option_default: 'vms'
            default_platforms: linux-x64,windows-x64
            default_customizations: default

            ut_enabled: 'OFF'

            ft_enabled: 'ON'
            ft_commit_choice_default: FT_STABLE_PUSH
            ft_commit_choice_option_default: ''
            test_select_expr: 'windows or smb'
            test_list: 'self_tests tests'

            rct_enabled: 'OFF'
            rct_commit_choice_default: RCT_STABLE_PUSH_OR_NIGHTLY
            rct_commit_choice_option_default: ''

            st_enabled: 'OFF'
            st_commit_choice_default: ST_BY_COMMIT
            st_commit_choice_option_default: ''

        - nightly-rct:
            auth_kind: system
            timer: 'H 0 * * 2-6'
            build_description: "Nightly test for stable RCT"

            vms_build_choice_default: 'VMS_EXISTING_BUILD_FROM_STABLE_PUSH'
            vms_build_choice_option_default: 'vms'
            default_platforms: linux-x64,windows-x64,mac,bpi
            default_customizations: default

            ut_enabled: 'OFF'

            ft_enabled: 'OFF'
            ft_commit_choice_default: FT_OTHER_COMMIT
            ft_commit_choice_option_default: ''

            rct_enabled: 'ON'
            rct_commit_choice_default: RCT_STABLE_PUSH
            rct_commit_choice_option_default: ''

            st_enabled: 'OFF'
            st_commit_choice_default: ST_BY_COMMIT
            st_commit_choice_option_default: ''

        - manual:
            vms_build_choice_default: 'VMS_EXISTING_BUILD_FROM_STABLE_PUSH'
            vms_build_choice_option_default: ''
            default_platforms: linux-x64,windows-x64,mac,bpi
            default_customizations: default

            ut_enabled: 'OFF'

            ft_enabled: 'OFF'
            ft_commit_choice_default: FT_OTHER_COMMIT
            ft_commit_choice_option_default: ''

            rct_enabled: 'ON'
            rct_commit_choice_default: RCT_OTHER_COMMIT
            rct_commit_choice_option_default: 'vms_rct'

            st_enabled: 'OFF'
            st_commit_choice_default: ST_BY_COMMIT
            st_commit_choice_option_default: ''

        - nightly-scalability:
            auth_kind: system
            timer: 'H 20 * * 2-6'
            build_description: "Nightly scalability test"

            vms_build_choice_default: 'VMS_EXISTING_BUILD_FROM_STABLE_PUSH_OR_NIGHTLY'
            vms_build_choice_option_default: ''
            default_platforms: linux-x64
            default_customizations: default

            ut_enabled: 'OFF'

            ft_enabled: 'OFF'
            ft_commit_choice_default: FT_OTHER_COMMIT
            ft_commit_choice_option_default: ''

            rct_enabled: 'OFF'
            rct_commit_choice_default: RCT_OTHER_COMMIT
            rct_commit_choice_option_default: 'vms_rct'

            st_enabled: 'ON'
            st_commit_choice_default: ST_STABLE
            st_commit_choice_option_default: ''

        - manual-scalability:
            vms_build_choice_default: 'VMS_EXISTING_BUILD_FROM_STABLE_PUSH_OR_NIGHTLY'
            vms_build_choice_option_default: ''
            default_platforms: linux-x64
            default_customizations: default

            ut_enabled: 'OFF'

            ft_enabled: 'OFF'
            ft_commit_choice_default: FT_OTHER_COMMIT
            ft_commit_choice_option_default: ''

            rct_enabled: 'OFF'
            rct_commit_choice_default: RCT_OTHER_COMMIT
            rct_commit_choice_option_default: 'vms_rct'

            st_enabled: 'ON'
            st_commit_choice_default: ST_LATEST
            st_commit_choice_option_default: ''
