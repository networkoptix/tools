- job-template:
    name: __helper.mercurial-mirror-sync
    id: mirror-sync
    description: Update local hg mirror

    node: repo-write
    workspace: !j2: '{{ hg_local_cache_node_workspace }}'
    concurrent: false


    triggers:
    - timed: !j2: "{{ timer | default('') }}"
    - pollscm:
        cron: !j2: "{{ poll_scm_timer | default('* * * * *') }}"
        ignore-post-commit-hooks: True

    scm:
    # GIT plugin allows to specify "empty" revision to react on every branch
    # But mercurial is special.
    # So all branches must be listed verbosely
    - mercurial/hdw-mx:
        project-name: devtools
        branch-name: 'default'
    - mercurial/hdw-mx:
        project-name: devtools
        branch-name: 'new_junk_shop_params'
