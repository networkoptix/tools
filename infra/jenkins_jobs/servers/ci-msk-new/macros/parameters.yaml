
# specific parameter for "registry-like" jobs
# TODO: can we use some envvar that points to particular parent build ?
- parameter:
    name: p_REQUESTED_BY
    parameters:
    - string:
        name: REQUESTED_BY
        default: ''
        description: |
          Sticky label to mark individual build and query it's artifact in future
- parameter:
    name: p_BUILD_DESCRIPTION
    parameters:
    - string:
        name: BUILD_DESCRIPTION
        default: '{default}'
        description: >-
          Free-style field to add some description for this build.
          This description will be posted on build page and also used in email notification.
          Use it to distinct one build from another.

# Common build parameters and build process customizations
- parameter:
    name: p_CLEAN_WORKSPACE
    parameters:
    - bool:
        name: CLEAN_WORKSPACE
        default: false
        description: Remove entire workspace before build

- parameter:
    name: p_CLEAN_CLONE
    parameters:
    - bool:
        name: CLEAN_CLONE
        default: false
        description: Remove stale repos before checkout

- parameter:
    name: p_CLEAN_BUILD
    parameters:
    - bool:
        name: CLEAN_BUILD
        default: '{default}'
        description: >
          Don't reuse build workspace from previous build
          (if false, then will try to reuse)

# Parameters That fully define artifacts: what sources used and where to put what's built

- parameter:
    name: p_BRANCH
    parameters:
    - string:
        name: BRANCH
        description: >
          Branch of nx_vms for setting up proper build context.

- parameter:
    name: p_NX_VMS_COMMIT
    parameters:
    - string:
        name: NX_VMS_COMMIT
        default: '{default}'
        description: >
          Frozen nx_vms commit id or branch. commit sha is preferred as
          all builds will be produced within the same repo state

- parameter:
    name: p_BUILD_IDENTITY
    parameters:
    - string:
        name: BUILD_IDENTITY
        default: ''
        description: Build number in context of pipeline
- parameter:
    name: p_PLATFORMS
    parameters:
    - string:
        name: PLATFORMS
        default: '{default}'
        description: >
          Target platforms comma-separated list for installer (e.g. linux-x64, win-x86 and others,
          note that universal is used for webadmin and other platform-independent components)

- parameter:
    name: p_PLATFORM
    parameters:
    - string:
        name: PLATFORM
        default: ''
        description: >
          Target platform for installer (e.g. linux-x64, win-x86 and others,
          note that universal is used for webadmin and other platform-independent components)

- parameter:
    name: p_CUSTOMIZATIONS
    parameters:
    - string:
        name: CUSTOMIZATIONS
        default: '{default}'
        description: >
          Comma-separated list names of installers customizations (e.g. default, hanwha and others)
- parameter:
    name: p_CUSTOMIZATION
    parameters:
    - string:
        name: CUSTOMIZATION
        default: 'default'
        description: >
          Name of installer customization (e.g. default, hanwha and others)

- parameter:
    name: p_COMPONENTS
    parameters:
    - string:
        name: COMPONENTS
        default: ''
        description: >
          Name of components, mostly used in context of artifact repository as part of path
          where artifact will be located (uploaded to or downloaded from) â€” comma-separated list.
          Note that trailing slash matters.

# Utility parameters used to describe connection details
- parameter:
    name: p_NODE_SSH_CONNECTION
    parameters:
    - string:
        name: NODE_SSH_CONNECTION
        default: ''
        description: >
          Original ssh connection from Jenkins SSH_CONNECTION envvar,
          (<src host> <src port> <dst host> <dst port> NOTE, FOUR VARS in string),
          example - 192.168.13.105 43896 192.168.13.116 22

- parameter:
    name: p_SSH_USER
    parameters:
    - string:
        name: SSH_USER
        description: >
          Name of ssh user used for ssh session (usually jenkins, but it may differ for
          edge cases)

# Specific parameters

# Define paths to operate on
- parameter:
    name: p_LOCAL_PATH
    parameters:
    - string:
        name: LOCAL_PATH
        default: ''
        description: >
          Local path on remote host
