# Macro to validate that params are set correctly:
# - not empty string
# - not variable name
# - not unfilled jjb template
#
# Parameters:
# - params - array of varnames to be checked
- builder:
    name: validate-required-params
    builders:
    - shell: !j2: |
        #!bash
        set -ex
        for var in {{ params }} ; do
          echo "Checking $var to be defined and filled correctly; value is ${!var}"
          test "${!var}" != '$'"${var}" # ~ "$REQUESTED_BY" != '$REQUESTED_BY'
          test "${!var}" != ''          # ~ "$REQUESTED_BY" != ''
          test "${!var}" != '{default}' # ~ "$REQUESTED_BY" != '{default}'
        done
