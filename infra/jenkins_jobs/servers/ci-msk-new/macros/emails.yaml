- publisher:
    name: failure-email

    publishers:
    - email-ext: &failure_email

        aborted:        true
        failure:        true
        still-failing:  true

        fixed:          false

        # ---- email contents ----
        send-to:
        - recipients
        - requester
        recipients: '{email-recipients}'
        subject: '[Jenkins] $BUILD_STATUS - $PROJECT_NAME - # $BUILD_NUMBER'
        body: |
          $BUILD_DESCRIPTION
          $BRANCH $PLATFORM $CUSTOMIZATION failed on commit $NX_VMS_COMMIT

          Build url - $BUILD_URL
          Junkshop url - $JUNKSHOP_URL

          $BUILD_LOG
        # ---- email contents ----

- publisher:
    name: failure-email-helpers(maintainers)

    publishers:
    - email-ext:
        <<: *failure_email
        send-to:
        - recipients
        recipients: '{email-recipients}'
        subject: '[Jenkins] $BUILD_STATUS - $PROJECT_NAME - # $BUILD_NUMBER'
        body: |
          $BUILD_DESCRIPTION
          $BRANCH $PLATFORM $CUSTOMIZATION failed on commit $NX_VMS_COMMIT

          Build url - $BUILD_URL

          $BUILD_LOG
        # ---- email contents ----

- publisher:
    name: failure-email(group)

    publishers:
    - email-ext:
        <<: *failure_email
        body: |
          $BUILD_DESCRIPTION
          $BRANCH $PLATFORMS $CUSTOMIZATIONS failed on commit $NX_VMS_COMMIT

          Build url - $BUILD_URL
          Artifacts - $REPOSITORY_ROOT_URL
          Junkshop url - $JUNKSHOP_URL

          $BUILD_LOG
        # ---- email contents ----

- publisher:
    name: fixed-email

    publishers:
    - email-ext:

        failure: false
        fixed:   true

        # ---- email contents ----
        send-to:
        - recipients
        - requester
        recipients: '{email-recipients}'
        subject: '[Jenkins] $BUILD_STATUS - $PROJECT_NAME - # $BUILD_NUMBER'
        body: |
          $BUILD_DESCRIPTION
          $BRANCH $PLATFORM $CUSTOMIZATION fixed with commit $NX_VMS_COMMIT

          Thanks, everyone.
        # ---- email contents ----

- publisher:
    name: completed-email

    publishers:
    - email-ext: &completed_email

        success: true
        aborted: true
        failure: true

        # ---- email contents ----
        send-to:
        - requester
        subject: '[Jenkins] $BUILD_STATUS - $PROJECT_NAME - # $BUILD_NUMBER'
        # TODO: Generate repository url
        body: |
          $BUILD_DESCRIPTION
          Completed $BRANCH $PLATFORM $CUSTOMIZATION $NX_VMS_COMMIT

          Build url - $BUILD_URL
          Artifacts - $REPOSITORY_URL
          Junkshop url - $JUNKSHOP_URL
        # ---- email contents ----

- publisher:
    name: completed-email(group)

    publishers:
    - email-ext:
        <<: *completed_email
        body: |
          $BUILD_DESCRIPTION
          Completed $BRANCH $PLATFORMS $CUSTOMIZATIONS $NX_VMS_COMMIT

          Build url - $BUILD_URL
          Artifacts - $REPOSITORY_ROOT_URL
          Junkshop url - $JUNKSHOP_URL
        # ---- email contents ----