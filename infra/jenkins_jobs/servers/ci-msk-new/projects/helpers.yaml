- project:
    name: helpers

    # comma-separated list of emails to whom send notifications related to builds
    build-watchers: iremizov@networkoptix.com

    pipeline:
    - debug:
        __debug__: true
        pipeline_priority: 1
    - release:
        junkshop_project_name: debug-release
        pipeline_priority: 9
    - develop:
        junkshop_project_name: ci
        pipeline_priority: 5
    - custom:
        pipeline_priority: 3
    jobs:

    # HELPERS - syncronize and publish different stuff

    - '{pipeline}.helper.sync-hg'
    - '{pipeline}.helper.pull-component'
    - '{pipeline}.helper.publish-build'
    - '{pipeline}.helper.publish-tests'
    - '{pipeline}.helper.freeze-nx-vms-commit'
    - '{pipeline}.helper.freeze-build-config'

    # REPORTERS - parse & upload logs, build and test information to outer services

    - '{pipeline}.helper.unittests-reporter'
    - '{pipeline}.helper.build-reporter'
    - '{pipeline}.helper.build-notification'

    # UTILITY - register commit, build identities and other

    # TODO: split different generators across different jobs
    # e.g. 3.2 has own gen with own range, 4.0 has own range, mobile - own
    - '{pipeline}.{counter_name}.generator':
        counter_name: build_number
        counter_var_name: BUILD_IDENTITY

    - '{pipeline}.helper.promote-build':
        pipeline:
        - release:
            pipeline_priority: 9
