# docker-compose configuration file for junk_shop deployment
# Usage:
# $ PGPASSWORD=xxxxx docker-compose -f deploy/compose-deploy.yaml up -d

version: '2'

volumes:
  junk_shop_database:

services:

  junk_shop_web:
    container_name: junk_shop_web
    image: junk_shop_web
    links:
      - junk_shop_db:database
    build:
      context: ..
      dockerfile: deploy/Dockerfile
    ports:
      - '10180:80'
    environment:
      DB_CONFIG: postgres:${PGPASSWORD}@database

  junk_shop_db:
    container_name: junk_shop_db
    image: postgres
    ports:
      - '5432:5432'
    environment:
      - PGPASSWORD
    volumes:
      - junk_shop_database:/var/lib/postgresql/data
