{% import "common_macros.html" as common_macros %}
{% import "run_macros.html" as run_macros %}

{% extends "layout.html" %}
{% block title %}{{ branch_name }} / {{ platform_name }}{% endblock %}

{% block head %}
  {{ super() }}
  <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='run.css') }}">
{% endblock head %}

{% block contents %}

  {{ common_macros.breadcrumbs([
       ('Branches',  url_for('matrix')),
       (branch_name, url_for('branch_platform_list', branch_name=branch_name))
   ]) }}

  <h2>{{ self.title() }}</h2>
  <hr>

  {% if not version_list %}
    <p>No runs executed yet</p>
  {% else %}

    {% call(element) run_macros.outcome_box_list(version_list) %}
      <a class="link"
         href="{{ url_for('branch_platform_version_run_list', branch_name=branch_name, platform_name=platform_name, version=element.version) }}">
         {{ element.version }}
      </a>
      {% if element.has_scalability %}
        <a class="link" href="{{ url_for('branch_platform_version_metrics', branch_name=branch_name, platform_name=platform_name, version=element.version) }}">Scalability</a>
      {% else %}
        <span class="disabled-link">Scalability</span>
      {% endif %}
    {% endcall %}

    {% call(page) common_macros.paginator(page_count, current_page) %}
      {{ url_for('branch_platform_version_list', branch_name=branch_name,
      platform_name=platform_name, page=page) }}
    {% endcall %}

  {% endif %}

{% endblock contents %}
